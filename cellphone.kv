#:kivy 1.0
<IncomingPopup>:
    size_hint: .7, .7
    auto_dismiss: False
    title: "Incoming Call!"
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "Someone is calling you!"
        Button:
            text: "Accept"
            on_press: root.reaction("accept")
        Button:
            text: "Refuse"
            on_press: root.reaction("refuse")

<DialPopup>:
    size_hint: .7, .7
    auto_dismiss: False
    title: "Call with " + root.display_text
    BoxLayout:
        orientation: "vertical"
        Label:
            text: root.call_duration
        Button:
            text: "End"
            on_press: root.dismiss()

<ErrorPopup>:
    size_hint: .7, .7
    auto_dismiss: False
    title: "Error"
    BoxLayout:
        orientation: "vertical"
        Label:
            text: root.display_text
        Button:
            text: "OK"
            on_press: root.dismiss()

<Cellphone>:
 
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: 'vertical'
        padding: 10
    
        TabbedPanel:
            id: tpanel
            do_default_tab: False


            TabbedPanelItem:
                id: phonepanel
                on_press: root.handle_tab_switch()
                text: "Phone"
                BoxLayout:
                    orientation: 'vertical'
                    Label:
                        text: root.display_text
                        text_size: self.width-20, self.height-20
                        valign: 'middle'
                        halign: 'center'
                        size_hint_y: .2
                        text_size: self.size
                        #theme: ('blue', 'variant_2')
                        halign: 'right'
                        font_size: self.height * .75
                    GridLayout:
                        cols:3
                        size_hint_y: .8
                        padding: 5
                        spacing: 5
                        Button:
                            text: "7"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("7")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "8"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("8")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "9"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("9")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "4"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("4")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "5"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("5")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "6"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("6")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "1"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("1")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "2"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("2")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "3"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("3")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "*"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("*")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "0"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("0")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "#"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("#")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                    GridLayout:
                        cols: 3
                        size_hint_y: .2
                        padding: 5
                        spacing: 5
                        Button:
                            text: "Dial"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("dial")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "Answer"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("answer")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
                        Button:
                            text: "Del"
                            size_hint: (.33,.25)
                            on_release: root.button_callback("del")
                            font_size: self.height * .4
                            #theme: ('blue', 'numpad')
        
                
                
            TabbedPanelItem:
                id: infopanel
                on_release: root.handle_tab_switch()
                text: "Info"
                
                BoxLayout:
                    orientation: "vertical"
                    Label:
                        text: root.info
                    Image:
                        source: "htw.png"

                        
            
                
            TabbedPanelItem:
                id: logpanel
                text: "Log"
                on_release: root.handle_tab_switch()

                TextInput:
                    size_hint_x: 20
                    text: root.log_text
            
            TabbedPanelItem:
                id: gpspanel
                text: "GPS"
                on_press: root.handle_tab_switch()
                BoxLayout:
                    orientation: "vertical"
                    GridLayout:
                        cols: 2
                        size_hint_y: .2
                        padding: 5
                        spacing: 5
                        Label:
                            text: "Baudrate"
                        Label:
                            text: "GPS Status"
                        Label:
                            text: root.gps_baudrate
                        Label:
                            text: root.gps_status
                       
                    GridLayout:
                        cols: 2
                        size_hint_y: .2
                        padding: 2
                        spacing: 2
                        Label:
                            text: "GNNS Info"
                        Label:
                            text: root.gps_gnss
                        

                    TextInput:
                        text: root.gps_data
                    
                    GridLayout:
                        cols: 2
                        size_hint_y: .2
                        padding: 2
                        spacing: 2
                    
                        Button:
                            text: root.gps_power
                            on_release: root.toggle_gps()
                        
                        Button:
                            text: "Update GPS"
                            on_release: root.update_gps()
    



